{
        {$CADDY_GLOBAL_OPTIONS}

        frankenphp {
                #worker /path/to/your/worker.php
                {$FRANKENPHP_CONFIG}
        }
}

{$CADDY_EXTRA_CONFIG}

{$SERVER_NAME:localhost} {
        #log {
        #       # Redact the authorization query parameter that can be set by Mercure
        #       format filter {
        #               request>uri query {
        #                       replace authorization REDACTED
        #               }
        #       }
        #}

        root * /apps/laravel/public
        encode zstd br gzip

        # Uncomment the following lines to enable Mercure and Vulcain modules
        #mercure {
        #       # Transport to use (default to Bolt)
        #       transport_url {$MERCURE_TRANSPORT_URL:bolt:///data/mercure.db}
        #       # Publisher JWT key
        #       publisher_jwt {env.MERCURE_PUBLISHER_JWT_KEY} {env.MERCURE_PUBLISHER_JWT_ALG}
        #       # Subscriber JWT key
        #       subscriber_jwt {env.MERCURE_SUBSCRIBER_JWT_KEY} {env.MERCURE_SUBSCRIBER_JWT_ALG}
        #       # Allow anonymous subscribers (double-check that it's what you want)
        #       anonymous
        #       # Enable the subscription API (double-check that it's what you want)
        #       subscriptions
        #       # Extra directives
        #       {$MERCURE_EXTRA_DIRECTIVES}
        #}
        #vulcain

        {$CADDY_SERVER_EXTRA_DIRECTIVES}
        php_server

        # supervise {
        #         command ["sleep 60 && php /apps/laravel/artisan schedule:run"]
        #         replicas 0 # ou 1 se quiser que execute continuamente
        #         dir /apps/laravel/ # importante para achar os arquivos
        #         env {
        #         # Variáveis de ambiente, se necessário
        #         }
        #         redirect_stdout {
        #         type file # ou null para ignorar
        #         file /var/log/supervisor/schedule_stdout.log # caminho para salvar o stdout
        #         }
        #         redirect_stderr {
        #         type file # ou null para ignorar
        #         file /var/log/supervisor/schedule_stderr.log # caminho para salvar o stderr
        #         }
        #         restart_policy always # ou on-failure ou never
        #         termination_grace_period 10s # tempo para o processo terminar antes de ser forçado
        # }
}

localhost:81 {
	root * /apps/site81
	encode zstd br gzip
	{$CADDY_SERVER_EXTRA_DIRECTIVES}
	php_server
}
